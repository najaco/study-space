(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(66)},28:function(e,t,n){},30:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(10),s=n.n(r),o=(n(28),n(1)),l=n(2),c=n(7),u=n(6),m=n(8),h=n(4),d=(n(30),n(15)),p=(n(47),n(49),n(51),n(53),n(21)),g=n(19),v=n(16),f=n(11),y=n(12),E=n(22),w=n(9),b=function(){function e(){return Object(o.a)(this,e),e.instance||(this.reviews=[],e.instance=this),e.instance}return Object(l.a)(e,[{key:"loadReviews",value:function(e){this.reviews=[];for(var t=0;t<e.length;t++)this.reviews.push(e[t])}},{key:"listReviews",value:function(){return this.reviews}},{key:"averageRating",value:function(){for(var e=0,t=0;t<this.reviews.length;t++){e+=this.reviews[t].rating}return e/=this.reviews.length}},{key:"sort",value:function(e){for(var t=0;t<this.reviews.length-1;t++)for(var n=t+1;n<this.reviews.length;n++)switch(e){case j.RATING:this.reviews[t].rating<this.reviews[n].rating&&this._swap(this.reviews,t,n);break;case j.TIME_STAMP:this.reviews[t].timestamp<this.reviews[n].timestamp&&this._swap(this.reviews,t,n)}}},{key:"buildReview",value:function(e,t,n,a,i,r){return Object.freeze({ID:0,rating:e,header:t,body:n,timestamp:a,Location:i,Username:r})}},{key:"_swap",value:function(e,t,n){var a=e[t];e[t]=e[n],e[n]=a}},{key:"getLocationCommentsURL",value:function(e){return k+"reviews?command=get&shortLocation="+e}},{key:"getAddReviewURL",value:function(e){return k+"reviews?command=add&loc="+e.loc+"&username="+e.username+"&header="+e.header+"&body="+e.body+"&timestamp="+e.timestamp+"&rating="+e.rating}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"getTimestamp",value:function(){var e=new Date,t=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear();return t+=" - "+e.getHours()+":"+e.getMinutes()}}]),e}(),k="https://2vdx6dl0a1.execute-api.us-east-1.amazonaws.com/prod/",j=Object.freeze({RATING:0,TIME_STAMP:1}),L="https://2vdx6dl0a1.execute-api.us-east-1.amazonaws.com/prod/",x=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"httpGet",value:function(e,t){return fetch(e,{method:"GET"}).then(function(e){return e.json()}).then(function(e){return t(e)}).catch(function(e){console.log(e)})}},{key:"httpPost",value:function(e,t,n){return fetch(e,{method:"POST",body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){return n(e)}).catch(function(e){console.log(e)})}}]),e}(),O=function(){function e(){return Object(o.a)(this,e),e.instance||(this.location_names=[],this.current_location=void 0,e.instance=this),e.instance}return Object(l.a)(e,[{key:"loadLocations",value:function(e){this.location_names=[];for(var t=0;t<e.length;t++)this.location_names.push(e[t])}},{key:"loadCurrentLocation",value:function(e){this.current_location=e}},{key:"listLocations",value:function(){return this.location_names}},{key:"currentLocation",value:function(){return this.current_location}},{key:"getListOfLocationsURL",value:function(){return L+"locations?command=list"}},{key:"getLocationDataURL",value:function(e){return L+"locations?command=get&shortName="+e}},{key:"getPostReviewToLocationURL",value:function(){return L+"locations?command=review"}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),C=function(){function e(){return Object(o.a)(this,e),e.instance||(this.current_user=null,e.instance=this),e.instance}return Object(l.a)(e,[{key:"loadCurrentUser",value:function(e){this.current_user=e}},{key:"getCurrentUser",value:function(){return this.current_user}},{key:"getGetUserURL",value:function(e){return L+"users?command=get&username="+e}},{key:"getAddUserURL",value:function(e,t,n,a){return L+"users?command=add&username="+e+"&password="+t+"&email="+n+"&picpath="+a}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),N=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"p-col-12"},i.a.createElement(v.Card,{title:this.props.header,subTitle:this.props.username},i.a.createElement("div",{className:"p-grid"},i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},this.props.body),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement(f.Rating,{value:this.props.rating,readonly:!0,stars:10,cancel:!1})),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},this.props.timestamp))))}}]),t}(a.Component),S=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Building Address:"),this.props.street," ",this.props.city,", ",this.props.state," ",this.props.zip),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Name:"),this.props.location," (",this.props.shortName,")"),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Comments:"),this.props.comments),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Average rating:"),i.a.createElement(f.Rating,{value:this.props.average_review,readonly:!0,stars:10,cancel:!1})))}}]),t}(a.Component),_=b.getInstance(),U=O.getInstance(),R=C.getInstance(),T={width:"100%",height:"570px"},I="",D="",G=[],A={},z=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).createComments=function(){var e=[];if(null!=A&&null!=A.comments&&0!==A.comments.length){A.average_review=0;var t=!0,n=!1,a=void 0;try{for(var r,s=A.comments[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var o=r.value;e.push(i.a.createElement(N,{header:o.header,username:o.username,body:o.body,rating:o.rating,timestamp:o.timestamp})),A.average_review+=o.rating}}catch(l){n=!0,a=l}finally{try{t||null==s.return||s.return()}finally{if(n)throw a}}return A.average_review=A.average_review/A.comments.length,e}},n.showBuildingData=function(){return null==A||n.isEmptyObject(A)?null:i.a.createElement(S,{location:A.location,shortName:A.shortName,comments:n.createComments(),average_review:A.average_review,street:A.street,city:A.city,state:A.state,zip:A.zip})},n.renderInputCard=function(){return 0===n.state.input_state?n.renderLogin():1===n.state.input_state?n.renderSignup():2===n.state.input_state?n.renderLeaveReview():void 0},n.renderLogin=function(){return i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h2",null,"Login"),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Username:")),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement(w.InputText,{value:n.state.username,onChange:function(e){return n.setState({username:e.target.value})}})),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Password:")),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement(w.InputText,{value:n.state.password,onChange:function(e){return n.setState({password:e.target.value})}})),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement(y.Button,{label:"Login",onClick:n.login}),i.a.createElement(y.Button,{label:"Sign Up",onClick:function(){n.setState({input_state:1})},style:{marginLeft:4}})))},n.renderSignup=function(){return i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h2",null,"Signup"),i.a.createElement("h4",null,"Username:"),i.a.createElement(w.InputText,{value:n.state.username,onChange:function(e){return n.setState({username:e.target.value})}}),i.a.createElement("h4",null,"Password:"),i.a.createElement(w.InputText,{value:n.state.password,onChange:function(e){return n.setState({password:e.target.value})}}),i.a.createElement("h4",null,"Confirm Password:"),i.a.createElement(w.InputText,{value:n.state.password,onChange:function(e){return n.setState({password:e.target.value})}}),i.a.createElement("h4",null,"Email:"),i.a.createElement(w.InputText,{value:n.state.email,onChange:function(e){return n.setState({email:e.target.value})}}),i.a.createElement("div",{style:{"text-align":"left",marginTop:4}},i.a.createElement(y.Button,{label:"Sign Up",onClick:n.signup})))},n.renderLeaveReview=function(){var e=[];return null!=n.state.building?(e.push(i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Comment Title:"),i.a.createElement(w.InputText,{value:n.state.title,onChange:function(e){return n.setState({title:e.target.value})}}))),e.push(i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Comment Title:"),i.a.createElement(E.InputTextarea,{rows:5,cols:30,value:n.state.comment,autoResize:!0,onChange:function(e){n.setState({comment:e.target.value})}}))),e.push(i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Give Review:"),i.a.createElement(f.Rating,{value:n.state.review,stars:10,cancel:!1,onChange:function(e){n.setState({review:e.target.value})}}))),e.push(i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement(y.Button,{label:"Post Comment",onClick:n.makePost})))):e.push(i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Select Building:"),i.a.createElement(g.Dropdown,{style:{width:"150px"},optionLabel:"location",value:n.state.building,options:G,onChange:n.buildingChanged,placeholder:"Select a Building"}))),e.push(i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement(y.Button,{label:"Logout",onClick:function(){n.logout()}}))),e},n.state={building:null,comment:"",title:"",username:"",password:"",email:"",input_state:0},n.buildingChanged=n.buildingChanged.bind(Object(h.a)(Object(h.a)(n))),n.makePost=n.makePost.bind(Object(h.a)(Object(h.a)(n))),n.login=n.login.bind(Object(h.a)(Object(h.a)(n))),n.logout=n.logout.bind(Object(h.a)(Object(h.a)(n))),n.signup=n.signup.bind(Object(h.a)(Object(h.a)(n))),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"isEmptyObject",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"componentDidMount",value:function(){U.loadLocations(this.getLocations())}},{key:"login",value:function(){I=this.state.username,D=this.state.password,this.setState({password:""}),this.setState({username:""}),this.validateUserData()}},{key:"logout",value:function(){I="",D="",this.setState({password:""}),this.setState({username:""}),this.setState({email:""}),this.setState({input_state:0}),this.validateUserData()}},{key:"signup",value:function(){var e=this;x.httpGet(R.getAddUserURL(this.state.username,this.state.password,this.state.email,"null"),function(){e.setState({input_state:2})})}},{key:"getLocations",value:function(){var e=this;return fetch(U.getListOfLocationsURL(),{method:"GET"}).then(function(e){return e.json()}).then(function(t){G=t,e.forceUpdate()}).catch(function(e){console.error(e)})}},{key:"validateUserData",value:function(){var e=this;fetch(R.getGetUserURL(I),{method:"GET"}).then(function(e){return e.json()}).then(function(t){if(!e.isEmptyObject(t[0])&&(console.log(t[0]),console.log(D),console.log(),D===t[0].password))return!0,void e.setState({input_state:2});!1,e.forceUpdate()}).catch(function(e){console.error(e)})}},{key:"getLocationReviews",value:function(e){var t=this;return fetch(_.getLocationCommentsURL(e.shortName),{method:"GET"}).then(function(e){return e.json()}).then(function(e){A.comments=e,t.forceUpdate()}).catch(function(e){console.error(e)})}},{key:"getLocationData",value:function(e){var t=this;return fetch(U.getLocationDataURL(e.shortName),{method:"GET"}).then(function(e){return e.json()}).then(function(n){t.isEmptyObject(n)?(console.error("Location Data Empty!"),A={location:"Wilmeth Active Learning Center",shortName:"WALC",comments:[{author:"Fake 1",title:"Love it!",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",rating:10},{author:"Fake 2",title:"Eh.",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",rating:5}]}):A=n[0],t.getLocationReviews(e)}).catch(function(e){console.error(e)})}},{key:"buildingChanged",value:function(e){this.setState({building:e.value}),this.getLocationData(e.value)}},{key:"makePost",value:function(e){var t=this,n={username:I,loc:this.state.building.shortName,header:this.state.title,rating:this.state.review,body:this.state.comment,timestamp:b.getTimestamp()};return A.comments.push(n),fetch(_.getAddReviewURL(n),{method:"GET"}).then(function(e){return e.json()}).then(function(e){t.forceUpdate()}).catch(function(e){console.error(e)})}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"p-grid p-col-12"},i.a.createElement("div",{className:"p-col-8"},i.a.createElement(p.GMap,{options:{center:{lat:40.4318914,lng:-86.91750952604869},zoom:14},style:T})),i.a.createElement("div",{className:"p-col-4"},i.a.createElement(v.Card,{style:{width:"100%",height:"570px","text-align":"left"},title:"Give a Review"},this.renderInputCard())),i.a.createElement("div",{className:"p-col-12"},i.a.createElement(v.Card,{style:{width:"100%",height:"100%","text-align":"left"},title:"Study Space"},i.a.createElement("div",{className:"p-grid"},i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Select Building:"),i.a.createElement(g.Dropdown,{style:{width:"150px"},optionLabel:"location",value:this.state.building,options:G,onChange:this.buildingChanged,placeholder:"Select a Building"})),this.showBuildingData())))))}}]),t}(a.Component),B=Object(d.GoogleApiWrapper)({apiKey:"AIzaSyD5x5n_np54p6TzuSVG_DYu9nEQSWH75LI"})(z);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P={width:"100%",height:"100%"},q=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(d.Map,{google:this.props.google,zoom:14,style:P,initialCenter:{lat:40.4318914,lng:-86.91750952604869}})}}]),t}(a.Component);Object(d.GoogleApiWrapper)({apiKey:"AIzaSyD5x5n_np54p6TzuSVG_DYu9nEQSWH75LI"})(q);s.a.render(i.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,2,1]]]);
//# sourceMappingURL=main.90a2adc2.chunk.js.map