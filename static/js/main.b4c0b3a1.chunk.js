(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(68)},29:function(e,t,a){},31:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(9),r=a.n(s),o=(a(29),a(2)),l=a(3),c=a(7),u=a(6),m=a(8),h=a(4),d=(a(31),a(10)),p=(a(48),a(50),a(52),a(54),a(56),a(20)),g=a(16),v=a(12),f=a(13),y=a(18),w=a(23),E=a(17),b=function(){function e(){return Object(o.a)(this,e),e.instance||(this.reviews=[],e.instance=this),e.instance}return Object(l.a)(e,[{key:"loadReviews",value:function(e){this.reviews=[];for(var t=0;t<e.length;t++)this.reviews.push(e[t])}},{key:"listReviews",value:function(){return this.reviews}},{key:"averageRating",value:function(){for(var e=0,t=0;t<this.reviews.length;t++){e+=this.reviews[t].rating}return e/=this.reviews.length}},{key:"sort",value:function(e){for(var t=0;t<this.reviews.length-1;t++)for(var a=t+1;a<this.reviews.length;a++)switch(e){case j.RATING:this.reviews[t].rating<this.reviews[a].rating&&this._swap(this.reviews,t,a);break;case j.TIME_STAMP:this.reviews[t].timestamp<this.reviews[a].timestamp&&this._swap(this.reviews,t,a)}}},{key:"buildReview",value:function(e,t,a,n,i,s){return Object.freeze({ID:0,rating:e,header:t,body:a,timestamp:n,Location:i,Username:s})}},{key:"_swap",value:function(e,t,a){var n=e[t];e[t]=e[a],e[a]=n}},{key:"getLocationCommentsURL",value:function(e){return k+"reviews?command=get&shortLocation="+e}},{key:"getAddReviewURL",value:function(e){return k+"reviews?command=add&loc="+e.loc+"&username="+e.username+"&header="+e.header+"&body="+e.body+"&timestamp="+e.timestamp+"&rating="+e.rating}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"getTimestamp",value:function(){var e=new Date,t=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear();return t+=" - "+e.getHours()+":"+e.getMinutes()}}]),e}(),k="https://2vdx6dl0a1.execute-api.us-east-1.amazonaws.com/prod/",j=Object.freeze({RATING:0,TIME_STAMP:1}),L="https://2vdx6dl0a1.execute-api.us-east-1.amazonaws.com/prod/",x=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"httpGet",value:function(e,t){return fetch(e,{method:"GET"}).then(function(e){return e.json()}).then(function(e){return t(e)}).catch(function(e){console.log(e)})}},{key:"httpPost",value:function(e,t,a){return fetch(e,{method:"POST",body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){return a(e)}).catch(function(e){console.log(e)})}}]),e}(),O=function(){function e(){return Object(o.a)(this,e),e.instance||(this.location_names=[],this.current_location=void 0,e.instance=this),e.instance}return Object(l.a)(e,[{key:"loadLocations",value:function(e){this.location_names=[];for(var t=0;t<e.length;t++)this.location_names.push(e[t])}},{key:"loadCurrentLocation",value:function(e){this.current_location=e}},{key:"listLocations",value:function(){return this.location_names}},{key:"currentLocation",value:function(){return this.current_location}},{key:"getListOfLocationsURL",value:function(){return L+"locations?command=list"}},{key:"getLocationDataURL",value:function(e){return L+"locations?command=get&shortName="+e}},{key:"getPostReviewToLocationURL",value:function(){return L+"locations?command=review"}},{key:"addressToCoordinates",value:function(e,t){var a="https://maps.googleapis.com/maps/api/geocode/json?address="+e+"&key="+C;x.httpGet(a,t)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),C="AIzaSyD5x5n_np54p6TzuSVG_DYu9nEQSWH75LI",S=function(){function e(){return Object(o.a)(this,e),e.instance||(this.current_user=null,e.instance=this),e.instance}return Object(l.a)(e,[{key:"loadCurrentUser",value:function(e){this.current_user=e}},{key:"getCurrentUser",value:function(){return this.current_user}},{key:"getGetUserURL",value:function(e){return L+"users?command=get&username="+e}},{key:"getAddUserURL",value:function(e,t,a,n){return L+"users?command=add&username="+e+"&password="+t+"&email="+a+"&picpath="+n}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),N=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"p-col-12"},i.a.createElement(g.Card,{title:this.props.header,subTitle:"Author: "+this.props.username},i.a.createElement("div",{className:"p-grid"},i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},this.props.body),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement(v.Rating,{value:this.props.rating,readonly:!0,stars:10,cancel:!1})),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},this.props.timestamp))))}}]),t}(n.Component),_=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Building Address:"),this.props.street," ",this.props.city,", ",this.props.state," ",this.props.zip),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Name:"),this.props.location," (",this.props.shortName,")"),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Comments:"),this.props.comments),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Average rating:"),i.a.createElement(v.Rating,{value:this.props.average_review,readonly:!0,stars:10,cancel:!1})))}}]),t}(n.Component),U=b.getInstance(),R=O.getInstance(),T=S.getInstance(),I={width:"1000px",height:"570px"},D="",G="",z=[],A={},P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).createComments=function(){var e=[];if(null!=A&&null!=A.comments&&0!==A.comments.length){A.average_review=0;var t=!0,a=!1,n=void 0;try{for(var s,r=A.comments[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var o=s.value;e.push(i.a.createElement(N,{header:o.header,username:o.username,body:o.body,rating:o.rating,timestamp:o.timestamp})),A.average_review+=o.rating}}catch(l){a=!0,n=l}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return A.average_review=A.average_review/A.comments.length,e}},a.showBuildingData=function(){return null==A||a.isEmptyObject(A)?null:i.a.createElement(_,{location:A.location,shortName:A.shortName,comments:a.createComments(),average_review:A.average_review,street:A.street,city:A.city,state:A.state,zip:A.zip})},a.renderInputCard=function(){return 0===a.state.input_state?a.renderLogin():1===a.state.input_state?a.renderSignup():2===a.state.input_state?a.renderLeaveReview():void 0},a.renderLogin=function(){return i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h2",null,"Login"),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Username:")),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement(E.InputText,{value:a.state.username,onChange:function(e){return a.setState({username:e.target.value})}})),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Password:")),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement(y.Password,{value:a.state.password,feedback:!1,onChange:function(e){return a.setState({password:e.target.value})}})),i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement(f.Button,{label:"Login",onClick:a.login}),i.a.createElement(f.Button,{label:"Sign Up",onClick:function(){a.setState({input_state:1})},style:{marginLeft:4}})))},a.renderSignup=function(){return i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h2",null,"Signup"),i.a.createElement("h4",null,"Username:"),i.a.createElement(E.InputText,{value:a.state.username,onChange:function(e){return a.setState({username:e.target.value})}}),i.a.createElement("h4",null,"Password:"),i.a.createElement(y.Password,{value:a.state.password,onChange:function(e){return a.setState({password:e.target.value})}}),i.a.createElement("h4",null,"Confirm Password:"),i.a.createElement(y.Password,{value:a.state.confirm_password,feedback:!1,onChange:function(e){return a.setState({confirm_password:e.target.value})}}),i.a.createElement("h4",null,"Email:"),i.a.createElement(E.InputText,{value:a.state.email,onChange:function(e){return a.setState({email:e.target.value})}}),i.a.createElement("div",{style:{"text-align":"left",marginTop:4}},i.a.createElement(f.Button,{label:"Sign Up",onClick:a.signup})))},a.renderLeaveReview=function(){var e=[];return null!=a.state.building?(e.push(i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Comment Title:"),i.a.createElement(E.InputText,{value:a.state.title,onChange:function(e){return a.setState({title:e.target.value})}}))),e.push(i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Comment Title:"),i.a.createElement(w.InputTextarea,{rows:5,cols:30,value:a.state.comment,autoResize:!0,onChange:function(e){a.setState({comment:e.target.value})}}))),e.push(i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Give Review:"),i.a.createElement(v.Rating,{value:a.state.review,stars:10,cancel:!1,onChange:function(e){a.setState({review:e.target.value})}}))),e.push(i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement(f.Button,{label:"Post Comment",onClick:a.makePost})))):e.push(i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Select Building:"),i.a.createElement(p.Dropdown,{style:{width:"250px"},optionLabel:"location",value:a.state.building,options:z,onChange:a.buildingChanged,placeholder:"Select a Building"}))),e.push(i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement(f.Button,{label:"Logout",onClick:function(){a.logout()}}))),e},a.state={building:null,comment:"",title:"",username:"",password:"",confirm_password:"",email:"",coordinates:null,input_state:0},a.buildingChanged=a.buildingChanged.bind(Object(h.a)(Object(h.a)(a))),a.makePost=a.makePost.bind(Object(h.a)(Object(h.a)(a))),a.login=a.login.bind(Object(h.a)(Object(h.a)(a))),a.logout=a.logout.bind(Object(h.a)(Object(h.a)(a))),a.signup=a.signup.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"isEmptyObject",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"componentDidMount",value:function(){document.title="Study Space",R.loadLocations(this.getLocations())}},{key:"login",value:function(){D=this.state.username,G=this.state.password,this.setState({password:""}),this.setState({username:""}),this.validateUserData()}},{key:"logout",value:function(){D="",G="",this.setState({password:""}),this.setState({username:""}),this.setState({email:""}),this.setState({input_state:0}),this.validateUserData()}},{key:"signup",value:function(){var e=this;this.state.password===this.state.confirm_password&&x.httpGet(T.getAddUserURL(this.state.username,this.state.password,this.state.email,"null"),function(){e.setState({input_state:2}),D=e.state.username,G="",e.setState({password:""}),e.setState({username:""})})}},{key:"getLocations",value:function(){var e=this;return fetch(R.getListOfLocationsURL(),{method:"GET"}).then(function(e){return e.json()}).then(function(t){z=t,e.forceUpdate()}).catch(function(e){console.error(e)})}},{key:"validateUserData",value:function(){var e=this;fetch(T.getGetUserURL(D),{method:"GET"}).then(function(e){return e.json()}).then(function(t){if(!e.isEmptyObject(t[0])&&G===t[0].password)return!0,void e.setState({input_state:2});!1,e.forceUpdate()}).catch(function(e){console.error(e)})}},{key:"getLocationReviews",value:function(e){var t=this;return fetch(U.getLocationCommentsURL(e.shortName),{method:"GET"}).then(function(e){return e.json()}).then(function(e){A.comments=e;var a=A.street+", "+A.city+", "+A.state;R.addressToCoordinates(a,function(e){return t.extractCoordinates(e)}),t.forceUpdate()}).catch(function(e){console.error(e)})}},{key:"extractCoordinates",value:function(e){this.setState({coordinates:e.results[0].geometry.location}),this.forceUpdate()}},{key:"getLocationData",value:function(e){var t=this;return fetch(R.getLocationDataURL(e.shortName),{method:"GET"}).then(function(e){return e.json()}).then(function(a){t.isEmptyObject(a)?(console.error("Location Data Empty!"),A={location:"Wilmeth Active Learning Center",shortName:"WALC",comments:[{author:"Fake 1",title:"Love it!",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",rating:10},{author:"Fake 2",title:"Eh.",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",rating:5}]}):A=a[0],t.getLocationReviews(e)}).catch(function(e){console.error(e)})}},{key:"buildingChanged",value:function(e){this.setState({building:e.value}),this.getLocationData(e.value)}},{key:"makePost",value:function(e){var t=this;if(""!=this.state.header&&0!=this.state.review&&""!=this.state.comment){var a={username:D,loc:this.state.building.shortName,header:this.state.title,rating:this.state.review,body:this.state.comment,timestamp:b.getTimestamp()};return this.state.title="",this.state.review="",this.state.comment="",A.comments.push(a),fetch(U.getAddReviewURL(a),{method:"GET"}).then(function(e){return e.json()}).then(function(e){t.forceUpdate()}).catch(function(e){console.error(e)})}}},{key:"render",value:function(){var e={center:{lat:40.4318914,lng:-86.91750952604869},zoom:14};return this.isEmptyObject(this.state.coordinates)||(e={center:this.state.coordinates,zoom:18}),i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"p-grid p-col-12"},i.a.createElement("div",{className:"p-col-8"},i.a.createElement(d.Map,{google:this.props.google,style:I,zoom:e.zoom,center:e.center},i.a.createElement(d.Marker,{name:A.location,position:this.state.coordinates}))),i.a.createElement("div",{className:"p-col-4"},i.a.createElement(g.Card,{style:{width:"100%",height:"570px","text-align":"left"},title:"Give a Review"},this.renderInputCard())),i.a.createElement("div",{className:"p-col-12"},i.a.createElement(g.Card,{style:{width:"100%",height:"100%","text-align":"left"},title:"Study Space"},i.a.createElement("div",{className:"p-grid"},i.a.createElement("div",{className:"p-col-12",style:{"text-align":"left"}},i.a.createElement("h4",null,"Select Building:"),i.a.createElement(p.Dropdown,{style:{width:"250px"},optionLabel:"location",value:this.state.building,options:z,onChange:this.buildingChanged,placeholder:"Select a Building"})),this.showBuildingData())))))}}]),t}(n.Component),B=Object(d.GoogleApiWrapper)({apiKey:"AIzaSyD5x5n_np54p6TzuSVG_DYu9nEQSWH75LI"})(P);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q={width:"100%",height:"100%"},M=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(d.Map,{google:this.props.google,zoom:14,style:q,initialCenter:{lat:40.4318914,lng:-86.91750952604869}})}}]),t}(n.Component);Object(d.GoogleApiWrapper)({apiKey:"AIzaSyD5x5n_np54p6TzuSVG_DYu9nEQSWH75LI"})(M);r.a.render(i.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,2,1]]]);
//# sourceMappingURL=main.b4c0b3a1.chunk.js.map